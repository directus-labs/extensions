import { defineInterface } from '@directus/extensions-sdk';
import InterfaceComponent from './interface.vue';

export default defineInterface({
	id: 'plausible-interface',
	name: 'Plausible Analytics',
	icon: 'analytics',
	description: 'Show Plausible Analytics dashboard inside your collection.',
	component: InterfaceComponent,
	options: (context) => [
		{
			field: 'shareUrl',
			name: 'Shared Link URL',
			type: 'string',
			meta: {
				width: 'full',
				interface: 'input',
				note: 'Create a shared link for your Plausible dashboard and paste the URL here.<br />This URL can be found in the Plausible settings for the domain.<br /> Learn more in the [Plausible documentation](https://plausible.io/docs/shared-links).',
				required: true,
				options: {
					placeholder: 'https://plausible.io/share/yourdomain.net?auth=fadfhlkadjl83c'
				}
			},

		},
		{
			field: 'pageFilter',
			name: 'Page URL Filter',
			type: 'string',
			meta: {
				width: 'full',
				interface: 'system-display-template',
				options: {
					collectionName: context.collection,
				},
				note: 'Filter the Plausible dashboard by a specific page. Provide the URL path as it appears on your site / frontend.',
			},
		},
	],
	types: ['alias'],
	localTypes: ['presentation'],
	group: 'presentation',
	autoKey: true,
	hideLabel: true,
	preview: `<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 160 100"><path d="M134 17H26a5 5 0 0 0-5 5v56a5 5 0 0 0 5 5h108a5 5 0 0 0 5-5V22a5 5 0 0 0-5-5Z" fill="var(--theme--background)" stroke="var(--theme--primary)" stroke-width="2"/><path d="M31 37h-4a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM31 27h-4a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM31 47h-4a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM31 57h-4a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM31 67h-4a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="var(--theme--primary)" fill-opacity=".25"/><path d="m35 50 5.178-7.045c.599-.814 2.287-1.012 3.306-.388l.897.55c1.112.68 2.967.374 3.412-.563l1.913-4.027a1.13 1.13 0 0 1 .178-.266l5.57-6.254a1.78 1.78 0 0 1 .603-.424l4.825-2.167c1.104-.496 2.65-.197 3.126.605l1.51 2.543c.302.51 1.072.847 1.931.847h4.035c.86 0 1.63.337 1.932.847l.7 1.18c.177.297.52.544.963.693l4.83 1.628c1.024.345 2.296.088 2.815-.568l2.884-3.644c.072-.09.16-.175.261-.252l9.33-7.072c.238-.181.55-.318.902-.396l7.912-1.754a3.141 3.141 0 0 1 1.732.109l7.317 2.739c.462.173.799.452.94.78l1.676 3.882c.049.112.121.22.214.32l5.171 5.543c.069.075.128.154.172.236l5.576 10.175c.171.311.521.57.98.725L132 50" stroke="var(--theme--primary)" stroke-opacity=".25" stroke-width="2" stroke-linecap="round"/><path d="M63.042 66.935V56.47h4.44c.629 0 1.191.148 1.69.441.498.294.894.696 1.188 1.204.294.508.441 1.081.441 1.72 0 .647-.147 1.23-.44 1.748-.295.519-.69.93-1.189 1.233a3.178 3.178 0 0 1-1.69.456h-2.197v3.663h-2.242Zm2.213-5.68h1.974c.239 0 .453-.063.642-.188.19-.124.342-.291.456-.5.115-.21.172-.449.172-.718 0-.27-.057-.503-.172-.703a1.358 1.358 0 0 0-.456-.478 1.18 1.18 0 0 0-.642-.18h-1.974v2.766Zm6.967 5.68V55.872h2.123v11.063h-2.123Zm6.787.15c-.658 0-1.251-.18-1.78-.538a3.76 3.76 0 0 1-1.255-1.465c-.31-.618-.464-1.326-.464-2.123 0-.798.158-1.505.471-2.123a3.665 3.665 0 0 1 1.279-1.45c.538-.35 1.15-.524 1.838-.524.39 0 .745.058 1.07.172.323.115.607.272.851.471.245.2.451.429.621.688.17.26.289.538.359.837l-.449-.075v-1.928h2.108v7.908H81.52v-1.898l.479-.045c-.08.279-.21.543-.389.792-.18.25-.401.47-.665.665-.264.195-.56.35-.89.464a3.164 3.164 0 0 1-1.046.172Zm.583-1.84c.398 0 .747-.094 1.046-.283.3-.19.531-.456.695-.8.165-.344.247-.745.247-1.204 0-.448-.082-.841-.246-1.18a1.943 1.943 0 0 0-.696-.8 1.876 1.876 0 0 0-1.046-.292c-.389 0-.73.097-1.024.292a2.016 2.016 0 0 0-.695.8c-.17.339-.255.732-.255 1.18 0 .46.085.86.255 1.204.169.344.4.61.695.8.294.19.635.284 1.024.284Zm8.461 1.84c-.578 0-1.074-.127-1.487-.381a2.5 2.5 0 0 1-.957-1.092c-.224-.473-.336-1.044-.336-1.712v-4.873h2.123v4.53c0 .358.06.67.179.934.12.264.289.466.508.605.22.14.488.21.808.21.229 0 .44-.038.635-.112a1.475 1.475 0 0 0 .845-.815c.08-.19.12-.394.12-.613v-4.74h2.122v7.91h-2.018l-.075-1.63.389-.18a2.66 2.66 0 0 1-.598 1.002c-.28.299-.613.533-1.002.703a3.11 3.11 0 0 1-1.256.254Zm9.06 0c-.738 0-1.393-.122-1.966-.366-.574-.245-1.034-.581-1.383-1.01l1.33-1.136c.3.329.638.566 1.017.71.379.145.757.217 1.136.217.15 0 .287-.017.411-.052.125-.035.232-.085.322-.15a.619.619 0 0 0 .202-.239.706.706 0 0 0 .067-.306.565.565 0 0 0-.27-.509 2.534 2.534 0 0 0-.463-.202 11.36 11.36 0 0 0-.807-.246 6.644 6.644 0 0 1-1.293-.456 2.962 2.962 0 0 1-.845-.59 2.337 2.337 0 0 1-.41-.68 2.235 2.235 0 0 1-.143-.816c0-.358.08-.685.24-.979.159-.294.38-.546.665-.755.284-.21.61-.371.979-.486a3.908 3.908 0 0 1 1.166-.172c.408 0 .807.05 1.196.15.389.1.75.242 1.084.426.334.184.625.401.874.65l-1.136 1.256a3.823 3.823 0 0 0-.605-.464 3.283 3.283 0 0 0-.696-.328c-.239-.08-.453-.12-.642-.12-.17 0-.322.015-.456.045a.905.905 0 0 0-.337.142.636.636 0 0 0-.201.232.659.659 0 0 0 .014.613c.055.1.132.184.232.254.11.06.272.13.486.209.214.08.506.17.875.27.478.129.884.273 1.218.433.334.16.6.343.8.553.17.18.294.384.373.613.08.23.12.483.12.762 0 .489-.137.922-.411 1.3-.274.38-.65.679-1.129.898a3.834 3.834 0 0 1-1.614.329Zm5.591-9.673c-.409 0-.728-.102-.957-.306-.229-.205-.344-.491-.344-.86 0-.339.117-.615.351-.83.235-.214.551-.321.95-.321.408 0 .727.102.957.306.229.205.343.486.343.845 0 .339-.117.618-.351.837-.234.22-.551.33-.949.33Zm-1.047 9.523v-7.908h2.123v7.908h-2.123Zm8.656.15a3.48 3.48 0 0 1-1.016-.15 3.496 3.496 0 0 1-.897-.411 2.776 2.776 0 0 1-.673-.598 1.65 1.65 0 0 1-.344-.695l.478-.18-.104 1.854h-2.003V55.872h2.137v5.008l-.418-.164c.059-.24.174-.47.344-.695.169-.224.383-.424.642-.598s.544-.311.852-.411c.309-.1.628-.15.957-.15.688 0 1.303.177 1.847.531.543.354.969.84 1.278 1.458.309.618.463 1.325.463 2.123 0 .797-.152 1.505-.456 2.122a3.607 3.607 0 0 1-1.263 1.458 3.245 3.245 0 0 1-1.824.53Zm-.508-1.81c.398 0 .745-.096 1.039-.29.294-.195.525-.464.695-.808.169-.344.254-.745.254-1.204 0-.448-.082-.846-.247-1.195a1.871 1.871 0 0 0-.695-.808 1.916 1.916 0 0 0-1.046-.284c-.399 0-.748.095-1.047.284-.299.19-.53.459-.695.808a2.78 2.78 0 0 0-.246 1.196c0 .458.082.86.246 1.203.165.344.396.613.695.807.299.195.648.292 1.047.292Zm5.367 1.66V55.872h2.123v11.063h-2.123Zm7.579.15c-.857 0-1.607-.175-2.25-.524a3.77 3.77 0 0 1-1.495-1.435c-.354-.608-.531-1.305-.531-2.093 0-.618.1-1.18.299-1.689.2-.508.479-.95.838-1.323a3.712 3.712 0 0 1 1.278-.867 4.16 4.16 0 0 1 1.607-.307c.538 0 1.036.1 1.495.3.458.199.854.475 1.188.83.334.353.591.772.77 1.255a4.04 4.04 0 0 1 .24 1.562l-.015.658h-6.354l-.344-1.3h4.948l-.239.268v-.328c-.02-.27-.107-.511-.261-.726a1.675 1.675 0 0 0-1.398-.695c-.439 0-.81.085-1.114.254-.304.17-.536.419-.695.748-.16.329-.239.727-.239 1.196 0 .478.102.892.306 1.24.204.35.493.621.867.816.374.194.815.291 1.323.291.349 0 .668-.055.957-.164.289-.11.598-.3.927-.569l1.016 1.42a4.33 4.33 0 0 1-.956.651 5.102 5.102 0 0 1-1.077.396c-.368.09-.732.135-1.091.135ZM57.5 58.743c-.374 3.582-3.506 6.244-7.107 6.244h-1.387v3.278a3.289 3.289 0 0 1-3.288 3.289H43.15A1.151 1.151 0 0 1 42 70.403v-6.75l1.726-2.42a1.152 1.152 0 0 1 1.383-.395l.981.411a1.149 1.149 0 0 0 1.38-.392l2.3-3.226c.311-.436.882-.598 1.375-.39l1.891.794a1.147 1.147 0 0 0 1.378-.39l2.213-3.105a6.989 6.989 0 0 1 .872 4.203Z" fill="var(--theme--primary)"/><path d="M43.128 60.89c.282-.395.692-.7 1.17-.791a1.853 1.853 0 0 1 1.077.108l.982.411a.465.465 0 0 0 .555-.159l2.258-3.167c.282-.395.692-.7 1.17-.79.37-.072.735-.035 1.071.107l1.89.795a.458.458 0 0 0 .555-.158l2.37-3.325A6.978 6.978 0 0 0 50.547 51H43.15c-.636 0-1.151.515-1.151 1.151v10.322l1.128-1.582Z" fill="var(--theme--primary)"/></svg>`
});
